<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taquer√≠a Leo | Men√∫</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.ably.com/lib/ably.min-1.js"></script>
    <style>
        body { background: #fdfdfd; font-family: 'Arial Black', sans-serif; }
        .btn-item { height: 90px; font-size: 1.4rem; border-radius: 20px; border: 4px solid #eee; background: white; width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; margin-bottom: 10px; }
        .btn-item:active { background: #e8f5e9; border-color: #2e7d32; }
        .precio { background: #2e7d32; color: white; padding: 4px 12px; border-radius: 50px; font-size: 1.1rem; }
        .seccion-titulo { color: #d32f2f; border-bottom: 5px solid #d32f2f; display: inline-block; margin-bottom: 15px; }
    </style>
</head>
<body class="p-3">
    <div style="max-width: 600px; margin: auto;">
        <h1 class="text-center fw-bold display-5 mb-0">TAQUER√çA LEO</h1>
        <p class="text-center text-danger fw-bold mb-4">Estimado de entrega: 45 min üïí</p>

        <h3 class="seccion-titulo">üçî CENAS Y PLATILLOS</h3>
        <button class="btn-item" onclick="add('h','Hamburguesa',120)"><span>Hamburguesa</span> <span class="precio">$120</span></button>
        <button class="btn-item" onclick="add('h','Orden Tacos',100)"><span>Orden Tacos</span> <span class="precio">$100</span></button>

        <h3 class="seccion-titulo mt-4">üçü SNACKS Y COMPLEMENTOS</h3>
        <button class="btn-item" onclick="add('s','Alitas',140)"><span>Alitas BBQ</span> <span class="precio">$140</span></button>
        <button class="btn-item" onclick="add('s','Papas Gajo',70)"><span>Papas Gajo</span> <span class="precio">$70</span></button>

        <div class="card p-4 shadow-lg border-dark mt-4" style="border-radius: 25px; border-width: 3px;">
            <input type="text" id="nom" class="form-control form-control-lg mb-2 border-dark" placeholder="NOMBRE">
            <div class="input-group mb-2">
                <input type="text" id="dir" class="form-control border-dark" placeholder="DIRECCI√ìN">
                <button class="btn btn-dark" onclick="fijarGps()">üìç GPS</button>
            </div>
            <div class="d-flex justify-content-between h2 fw-bold text-success"><span>TOTAL:</span><span id="tot-txt">$10</span></div>
            <button class="btn btn-success w-100 py-4 fs-1 fw-bold rounded-pill" onclick="pedir()">PEDIR ‚úÖ</button>
        </div>
    </div>

<script>
    const ably = new Ably.Realtime({ key: 'DTn3Xw.LRKcmg:kyc7qhpjvAETzWfzWTVNnLerapobqPaCivYdBVk97OA' });
    const canal = ably.channels.get('canal-operativo-menu');
    let sub = 0, alim = "", snak = "", gps = "";

    function add(tipo, n, p) { 
        sub += p; 
        if(tipo=='h') alim += `‚Ä¢ 1x ${n}\n`; else snak += `‚Ä¢ 1x ${n}\n`;
        document.getElementById('tot-txt').innerText = `$${sub + 10}`; 
    }

    function fijarGps() { navigator.geolocation.getCurrentPosition(p => { gps = `${p.coords.latitude},${p.coords.longitude}`; alert("üìç GPS Guardado"); }); }

    function pedir() {
        const n = document.getElementById('nom').value, d = document.getElementById('dir').value;
        if(!n || !d || sub == 0) return alert("Faltan datos");
        canal.publish('nuevo-pedido', { id: Date.now(), nombre: n, direccion: d, gps, alimentos: alim, snacks: snak, total: sub+10, presencial: false }, () => {
            localStorage.setItem('sesion_leo', JSON.stringify({ id: Date.now(), time: Date.now() }));
            location.reload();
        });
    }
</script>
</body>
</html>
